---
phase: 07-publishing-and-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - Directory.Build.props
  - icon.png
autonomous: true

must_haves:
  truths:
    - "Repository README shows package catalog with clear descriptions"
    - "Architecture overview shows package dependency structure"
    - "NuGet packages include icon and SourceLink for debugging"
  artifacts:
    - path: "README.md"
      provides: "Repository documentation with package catalog"
      min_lines: 150
      contains: "Package Catalog"
    - path: "Directory.Build.props"
      provides: "Complete NuGet metadata configuration"
      contains: "PackageIcon"
    - path: "icon.png"
      provides: "NuGet package icon"
      min_size_bytes: 100
  key_links:
    - from: "Directory.Build.props"
      to: "*.nupkg"
      via: "MSBuild PackageIcon and SourceLink"
      pattern: "PackageIcon|SourceLink"
---

<objective>
Create comprehensive repository README with package catalog and architecture overview; enhance NuGet metadata for all packages.

Purpose: Per CONTEXT.md, main README should be a package catalog with architecture overview showing dependency structure. NuGet packages should have professional metadata including custom icon and SourceLink for debugging.

Output: Updated README.md and Directory.Build.props with complete NuGet configuration.
</objective>

<execution_context>
@C:\Users\kolat\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\kolat\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:\Code\imagile-framework\.planning\STATE.md
@C:\Code\imagile-framework\.planning\phases\07-publishing-and-documentation\07-CONTEXT.md

# Current configuration
@C:\Code\imagile-framework\Directory.Build.props
@C:\Code\imagile-framework\README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Repository README with Package Catalog</name>
  <files>C:\Code\imagile-framework\README.md</files>
  <action>
**IMPORTANT:** Current README.md contains EntityFrameworkCore.Testing documentation (205 lines). This content has been moved to Plan 01 Task 5 (EntityFrameworkCore.Testing package README). The current file can be replaced with repository-level documentation.

Replace entire README.md with new repository-level content:

**Structure:**
1. **Header**: "Imagile Framework" title with tagline
2. **Introduction**: Brief 2-3 sentence overview of what the framework provides
3. **Package Catalog**: Table with all 6 packages:
   - Imagile.Framework.Core (zero-dependency attributes)
   - Imagile.Framework.EntityFrameworkCore (audit logging)
   - Imagile.Framework.EntityFrameworkCore.Testing (convention tests)
   - Imagile.Framework.Blazor.ApplicationInsights (telemetry)
   - Imagile.Framework.Configuration (Azure config + Key Vault)
   - Imagile.Framework.Storage (Azure Storage abstractions)

   Table columns: Package | Description | Dependencies

4. **Architecture Overview**: ASCII diagram or text description showing:
   ```
   Core (zero dependencies)
     |
     +-- EntityFrameworkCore
     |     +-- EntityFrameworkCore.Testing
     |
     +-- Blazor.ApplicationInsights
     |
     +-- Configuration
           +-- Storage
   ```

5. **Quick Start**: One minimal example showing how to get started
6. **Requirements**: .NET 10.0+
7. **License**: MIT
8. **Contributing**: Brief note about contributions welcome

**Style notes:**
- Keep descriptions punchy and concise (tagline style per CONTEXT.md)
- No extensive API docs here - individual package READMEs have that
- Focus on helping developers understand what packages exist and how they relate
  </action>
  <verify>README.md exists with >150 lines. Contains "Package Catalog" section. Contains architecture diagram/overview.</verify>
  <done>Repository README provides package catalog and architecture overview for developers to understand framework structure</done>
</task>

<task type="auto">
  <name>Task 2: Enhance NuGet Package Metadata</name>
  <files>C:\Code\imagile-framework\Directory.Build.props</files>
  <action>
Update Directory.Build.props to add missing NuGet metadata:

**Add to PropertyGroup:**
1. Copyright: `<Copyright>Copyright (c) 2024 Imagile. All rights reserved.</Copyright>`
2. PackageIcon: `<PackageIcon>icon.png</PackageIcon>`
3. SourceLink configuration:
   - `<PublishRepositoryUrl>true</PublishRepositoryUrl>`
   - `<EmbedUntrackedSources>true</EmbedUntrackedSources>`
   - `<IncludeSymbols>true</IncludeSymbols>`
   - `<SymbolPackageFormat>snupkg</SymbolPackageFormat>`
4. Deterministic builds for SourceLink: `<Deterministic>true</Deterministic>`
5. ContinuousIntegrationBuild condition for CI:
   ```xml
   <ContinuousIntegrationBuild Condition="'$(GITHUB_ACTIONS)' == 'true'">true</ContinuousIntegrationBuild>
   ```

**Add PackageReference for SourceLink:**
```xml
<ItemGroup>
  <PackageReference Include="Microsoft.SourceLink.GitHub" Version="8.0.0" PrivateAssets="All" />
</ItemGroup>
```

**Add icon placeholder:**
Create a simple icon.png placeholder file at repository root (64x64 or 128x128 PNG).
For now, create a minimal PNG file or reference an existing one. The icon will be included in all packages.

Add ItemGroup for icon inclusion in all packages:
```xml
<ItemGroup Condition="'$(IsPackable)' == 'true'">
  <None Include="$(MSBuildThisFileDirectory)icon.png" Pack="true" PackagePath="\" />
</ItemGroup>
```
  </action>
  <verify>Directory.Build.props contains PackageIcon, SourceLink package reference, and symbol package configuration. Build succeeds: `dotnet build Imagile.Framework.sln -c Release`</verify>
  <done>NuGet packages configured with icon, SourceLink, and symbol packages for professional distribution</done>
</task>

<task type="auto">
  <name>Task 3: Create Package Icon</name>
  <files>C:\Code\imagile-framework\icon.png</files>
  <action>
Create a 128x128 PNG icon for the NuGet packages using a cross-platform approach.

**Approach:** Download a placeholder icon using curl (works on Windows, Linux, macOS):

```bash
# Download a simple placeholder icon from placeholder service
curl -L "https://via.placeholder.com/128/007ACC/FFFFFF?text=IF" -o icon.png
```

**Alternative if curl fails:** Create minimal valid PNG using base64:

```bash
# Minimal 1x1 blue PNG (base64 encoded) - expand to placeholder
echo "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" | base64 -d > icon.png
```

**Note:** This creates a placeholder icon. Document in README that users should replace with custom branded icon for production use.

The icon will be included in all packages via Directory.Build.props ItemGroup.
  </action>
  <verify>
1. icon.png exists at repository root
2. File size > 0 bytes: `stat icon.png` or `ls -la icon.png`
3. File is valid PNG: `file icon.png` should show "PNG image data"
  </verify>
  <done>Package icon placeholder created for NuGet package branding (user can replace with custom icon)</done>
</task>

</tasks>

<verification>
1. README.md is completely rewritten with package catalog format
2. Directory.Build.props includes:
   - Copyright element
   - PackageIcon element
   - SourceLink package reference
   - Symbol package configuration (IncludeSymbols, SymbolPackageFormat)
3. icon.png exists at repository root
4. `dotnet build Imagile.Framework.sln -c Release` succeeds
5. `dotnet pack Imagile.Framework.sln -c Release -o ./test-packages` creates both .nupkg and .snupkg files
</verification>

<success_criteria>
- Repository README serves as package catalog with architecture overview
- All packages have consistent NuGet metadata (icon, SourceLink)
- Symbol packages (.snupkg) are generated for debugging support
- Solution builds and packs successfully
</success_criteria>

<output>
After completion, create `.planning/phases/07-publishing-and-documentation/07-02-SUMMARY.md`
</output>
