---
phase: 04-blazor-package
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IApplicationInsights.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IAppInsights.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IDependenciesPlugin.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IPropertiesPlugin.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Config.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Configuration.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/EventTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/ExceptionTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/TraceTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/MetricTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/PageViewTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/PageViewPerformanceTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/DependencyTelemetry.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/TelemetryItem.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/TelemetryContext.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/SeverityLevel.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Error.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/PartC.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/CookieMgr.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Application.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Device.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Internal.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Location.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/OperatingSystem.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Session.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/SessionManager.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/TelemetryTrace.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/UserContext.cs
  - src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Web.cs
autonomous: true

must_haves:
  truths:
    - "IApplicationInsights interface defines all tracking methods (TrackEvent, TrackException, TrackPageView, etc.)"
    - "Config model contains all Application Insights JavaScript SDK configuration options"
    - "Telemetry models (Event, Exception, Trace, Metric, PageView) are serializable to JSON for JS interop"
    - "SeverityLevel enum matches Application Insights severity levels"
  artifacts:
    - path: "src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IApplicationInsights.cs"
      provides: "Main telemetry API interface"
      contains: "interface IApplicationInsights"
    - path: "src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IAppInsights.cs"
      provides: "Core tracking methods interface"
      contains: "Task TrackEvent"
    - path: "src/Imagile.Framework.Blazor.ApplicationInsights/Models/Config.cs"
      provides: "SDK configuration model"
      contains: "class Config"
    - path: "src/Imagile.Framework.Blazor.ApplicationInsights/Models/EventTelemetry.cs"
      provides: "Custom event telemetry model"
      contains: "class EventTelemetry"
  key_links:
    - from: "IApplicationInsights"
      to: "IAppInsights, IDependenciesPlugin, IPropertiesPlugin"
      via: "interface inheritance"
      pattern: "interface IApplicationInsights : IAppInsights"
---

<objective>
Migrate core interfaces and telemetry models from Imagile.BlazorApplicationInsights repository to the framework package.

Purpose: Establish the foundational types that all other telemetry functionality builds upon. These interfaces define the API contract and models define the data structures for JS interop.

Output: Complete set of interfaces and model classes in Imagile.Framework.Blazor.ApplicationInsights namespace, ready for implementation.
</objective>

<execution_context>
@C:\Users\kolat\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\kolat\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-blazor-package/04-RESEARCH.md

Source repository for migration:
@C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Interfaces\IApplicationInsights.cs
@C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Interfaces\IAppInsights.cs
@C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Interfaces\IDependenciesPlugin.cs
@C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Interfaces\IPropertiesPlugin.cs
@C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Models\Config.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Interfaces</name>
  <files>
    src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IApplicationInsights.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IAppInsights.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IDependenciesPlugin.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Interfaces/IPropertiesPlugin.cs
  </files>
  <action>
    Copy interface files from C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Interfaces\ to the framework package.

    For each file:
    1. Change namespace from `Imagile.BlazorApplicationInsights.Interfaces` to `Imagile.Framework.Blazor.ApplicationInsights.Interfaces`
    2. Update any model references from `Imagile.BlazorApplicationInsights.Models` to `Imagile.Framework.Blazor.ApplicationInsights.Models`
    3. Preserve all XML documentation comments
    4. Remove JetBrains.Annotations [PublicAPI] attribute if present (not needed in framework)

    Interfaces to migrate:
    - IApplicationInsights.cs (main API, inherits IAppInsights, IDependenciesPlugin, IPropertiesPlugin)
    - IAppInsights.cs (core tracking methods: TrackEvent, TrackPageView, TrackException, TrackTrace, etc.)
    - IDependenciesPlugin.cs (TrackDependencyData method)
    - IPropertiesPlugin.cs (Context method)
  </action>
  <verify>
    Build: `dotnet build src/Imagile.Framework.Blazor.ApplicationInsights -c Release`
    Should fail (missing model types) - that's expected at this stage
  </verify>
  <done>All four interface files exist in Interfaces/ folder with updated namespaces</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Core Models</name>
  <files>
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Config.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Configuration.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/EventTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/ExceptionTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/TraceTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/MetricTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/PageViewTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/PageViewPerformanceTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/DependencyTelemetry.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/TelemetryItem.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/TelemetryContext.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/SeverityLevel.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Error.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/PartC.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/CookieMgr.cs
  </files>
  <action>
    Copy model files from C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Models\ to the framework package.

    For each file:
    1. Change namespace from `Imagile.BlazorApplicationInsights.Models` to `Imagile.Framework.Blazor.ApplicationInsights.Models`
    2. Preserve all [JsonPropertyName] attributes for JS SDK compatibility
    3. Preserve all XML documentation comments
    4. Remove JetBrains.Annotations attributes if present

    Core models to migrate (non-Context):
    - Config.cs (SDK configuration: ConnectionString, EnableAutoRouteTracking, etc.)
    - Configuration.cs (base configuration)
    - EventTelemetry.cs, ExceptionTelemetry.cs, TraceTelemetry.cs (telemetry types)
    - MetricTelemetry.cs, PageViewTelemetry.cs, PageViewPerformanceTelemetry.cs
    - DependencyTelemetry.cs (dependency tracking)
    - TelemetryItem.cs, TelemetryContext.cs (envelope types)
    - SeverityLevel.cs (enum: Verbose, Information, Warning, Error, Critical)
    - Error.cs (exception model for JS)
    - PartC.cs (telemetry part)
    - CookieMgr.cs (cookie manager wrapper)
  </action>
  <verify>
    Check files exist: `dir src\Imagile.Framework.Blazor.ApplicationInsights\Models\*.cs /b`
    Should list all 15 model files
  </verify>
  <done>All 15 core model files exist in Models/ folder with updated namespaces</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Context Models and Verify Build</name>
  <files>
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Application.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Device.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Internal.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Location.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/OperatingSystem.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Session.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/SessionManager.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/TelemetryTrace.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/UserContext.cs
    src/Imagile.Framework.Blazor.ApplicationInsights/Models/Context/Web.cs
  </files>
  <action>
    Copy context model files from C:\Code\Imagile.BlazorApplicationInsights\src\Imagile.BlazorApplicationInsights\Models\Context\ to the framework package.

    For each file:
    1. Change namespace from `Imagile.BlazorApplicationInsights.Models.Context` to `Imagile.Framework.Blazor.ApplicationInsights.Models.Context`
    2. Preserve all [JsonPropertyName] attributes
    3. Preserve XML documentation

    Context models to migrate:
    - Application.cs, Device.cs, Internal.cs, Location.cs
    - OperatingSystem.cs, Session.cs, SessionManager.cs
    - TelemetryTrace.cs, UserContext.cs, Web.cs

    After migration, verify the build succeeds (may still have warnings about missing implementation).
  </action>
  <verify>
    Build package: `dotnet build src/Imagile.Framework.Blazor.ApplicationInsights -c Release`
    Should compile successfully (interfaces and models only, no implementation yet)
  </verify>
  <done>All context models migrated, package compiles successfully with interfaces and models</done>
</task>

</tasks>

<verification>
- All interface files compile without errors
- All model files have correct namespaces
- JsonPropertyName attributes preserved for JS interop compatibility
- No JetBrains.Annotations dependencies introduced
- Package builds successfully: `dotnet build src/Imagile.Framework.Blazor.ApplicationInsights -c Release`
</verification>

<success_criteria>
- 4 interface files in Interfaces/ folder
- 25 model files total (15 core + 10 context)
- All files use Imagile.Framework.Blazor.ApplicationInsights namespace
- Package compiles successfully
- Ready for implementation in Plan 02
</success_criteria>

<output>
After completion, create `.planning/phases/04-blazor-package/04-01-SUMMARY.md`
</output>
